{% extends "base.html" %}

{% block title %}
  Unknown Names Replacement
{% endblock %}

{% block head_scripts %}
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src={{ url_for('static', filename='suggest.js') }}> </script>
{% endblock %}

{% block content %}
  <div id="explanation">You can use this form to change any gendered word that we forgot or that is specific to your
    book. Just type the word you want to change on the left, and the replacement you'd like to use on the
    right. If you are a right-wing troll-child, you can probably use this to amuse your easily-amused
    troll-friends by creating racist or sexist trash. We do not care and are not impressed.
  </div>
  <form method="POST" id="name-selection-form">
    <table>
      <thead>
        <tr>
          <th>Existing Word</th>
          <th>New Word</th>
	  <th colspan="3">Suggestion</th>
        </tr>
      </thead>
      <tbody>
	{% for _ in range(10) %}
        <tr>
	  <td><input type="text" name="existing_names[]" /></td>
          <td><input type="text" name="new_names[]" /></td>
          <td>
            <button type="button" onclick="suggestNb(this.parentNode.parentNode)">
              NB
            </button>
          </td>
	  <td>
            <button type="button" onclick="suggestFemale(this.parentNode.parentNode)">
              F
            </button>
          </td>
	  <td>
            <button type="button" onclick="suggestMale(this.parentNode.parentNode)">
              M
            </button>
          </td>
	  <td>
            <button type="button" onclick="clearRow(this.parentNode.parentNode)">
              Clear
            </button>
          </td>

        </tr>
        {% endfor %}
        <tr>
          <td colspan="3"><button type="submit">Submit</button></td>
        </tr>
      </tbody>
    </table>
  </form>
  <div id="processing-message" style="display: none;">
    Your book is being degendered/regendered!<br>
    Keep this page open until it's ready.<br>
    You can keep browsing in a different tab in the meantime.<br>
    A file save dialogue will pop up when it's done.
    <p>If you like the result and would like it to be included in our samples page,
      <a href="/submission-form">click here</a>.</p>
    <p>If you want to change the names of some characters or degender words that we missed,
    you can return to the name selection page by <a href="/known-names">clicking here</a>.</p>
    <p>If you want to start the degendering process for your book from scratch,
    <a href="/pronouns">click here</a>.</p>
  </div>
  <script>
    // Intercept the form submission
    document.getElementById('name-selection-form').addEventListener('submit', function () {
	showProcessingMessage(); // Show the processing message
    });

    // Function to show the processing message
    function showProcessingMessage() {
	// Hide the form
	document.getElementById('name-selection-form').style.display = 'none';

	// Hide the text
	document.getElementById('explanation').style.display = 'none';
	
	// Show the processing message
	document.getElementById('processing-message').style.display = 'block';
    }
  </script>

{% endblock %}
